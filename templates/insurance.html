<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Insurance Coverage - HealthSentinel</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: 'Inter', sans-serif; }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .animate-fadeIn { animation: fadeIn 1s ease-in-out; }
    .delay-200 { animation-delay: 0.2s; }
    .ripple-effect {
      position: absolute;
      border-radius: 50%;
      transform: scale(0);
      animation: ripple-animation 600ms linear;
      background-color: rgba(255, 255, 255, 0.6);
      pointer-events: none;
    }
    @keyframes ripple-animation {
      to { transform: scale(4); opacity: 0; }
    }
  </style>
</head>
<body class="bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 text-gray-800 flex flex-col min-h-screen">

  <!-- Navbar -->
  <nav class="flex justify-between items-center px-8 py-6 bg-white shadow-lg sticky top-0 z-50">
    <div class="text-2xl font-extrabold text-blue-700 tracking-wide">HealthSentinel</div>
    <div class="space-x-6">
      <a href="{{ url_for('index') }}" class="text-gray-700 hover:text-blue-700 transition">Home</a>
      <a href="{{ url_for('index') }}#about" class="text-gray-700 hover:text-blue-700 transition">About</a>
      <a href="{{ url_for('index') }}#contact" class="text-gray-700 hover:text-blue-700 transition">Contact</a>
      <a href="{{ url_for('insurance') }}" class="text-blue-700 font-semibold border-b-2 border-blue-700 pb-1">Insurance</a>
    </div>
  </nav>

  <!-- Hero Section -->
  <section class="relative text-center py-20 px-8">
    <h1 class="text-5xl font-extrabold text-blue-800 mb-4 animate-fadeIn">Insurance Coverage Checker</h1>
    <p class="text-lg text-gray-600 max-w-2xl mx-auto animate-fadeIn delay-200">
      Quickly find out which hospitals are covered under your insurance provider.  
      Save time, avoid confusion, and make confident healthcare choices.
    </p>
    <div class="absolute top-10 right-10 w-24 h-24 bg-blue-200 rounded-full blur-2xl opacity-40 animate-pulse"></div>
    <div class="absolute bottom-10 left-10 w-28 h-28 bg-purple-200 rounded-full blur-2xl opacity-40 animate-pulse"></div>
  </section>

  <!-- Insurance Section -->
  <section class="py-12 px-8">
    <div class="max-w-3xl mx-auto bg-white rounded-2xl p-10 shadow-2xl border border-gray-100 hover:shadow-3xl transition">

      <!-- Instructions -->
      <div class="mb-8">
        <h2 class="text-xl font-semibold text-blue-700 mb-4">How It Works:</h2>
        <ol class="list-decimal list-inside text-gray-600 space-y-2">
          <li>Enter your insurance provider in the search box below.</li>
          <li>Click on <span class="font-semibold">Check Coverage</span>.</li>
          <li>View the list of hospitals covered by your provider instantly.</li>
        </ol>
      </div>

      <!-- Form -->
      <form method="POST" action="{{ url_for('insurance') }}">
        <label for="insurance" class="block text-lg font-medium mb-3 text-gray-700">
         Enter your Insurance Provider:
        </label>

        <!-- Autocomplete -->
        <div class="relative">
          <input 
            type="text" 
            id="insurance" 
            name="insurance" 
            value="{{ insurance or '' }}"
            class="w-full border border-gray-300 rounded-xl p-4 focus:outline-none focus:ring-4 focus:ring-blue-200 mb-2 transition"
            placeholder="e.g. AIA, Prudential, Great Eastern" 
            autocomplete="off"
            oninput="filterProviders(this.value)"
            required
          >
          <ul id="providerList" class="absolute left-0 right-0 bg-white border rounded-lg shadow-lg max-h-48 overflow-y-auto hidden z-50">
            {% for provider in providers %}
              <li class="px-4 py-2 cursor-pointer hover:bg-blue-100"
                  onclick="selectProvider('{{ provider }}')">{{ provider }}</li>
            {% endfor %}
          </ul>
        </div>

        <button 
          type="submit" 
          class="mt-6 w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 rounded-xl font-semibold shadow-md hover:scale-105 hover:shadow-lg transition-transform duration-300">
          üîç Check Coverage
        </button>
      </form>

      <!-- Recently Searched -->
      {% if recent_providers %}
      <div class="mt-10 p-6 bg-gray-50 border border-gray-200 rounded-xl shadow-sm">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-xl font-bold text-purple-700">üïë Recently Searched Insurance Providers</h3>
          <form method="POST" action="{{ url_for('clear_recent') }}">
            <button 
              type="submit" 
              class="text-sm px-3 py-1 bg-red-500 text-white rounded-lg shadow hover:bg-red-600 transition">
              Clear History
            </button>
          </form>
        </div>
        <div class="flex flex-wrap gap-3">
          {% for provider in recent_providers %}
          <form method="POST" action="{{ url_for('insurance') }}" class="relative overflow-hidden rounded-lg">
            <input type="hidden" name="insurance" value="{{ provider }}">
            <button 
              type="submit" 
              class="ripple px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg shadow hover:scale-105 transition-transform duration-200 relative overflow-hidden">
              {{ provider }}
            </button>
          </form>
          {% endfor %}
        </div>
      </div>
      {% endif %}

      <!-- Search Results -->
      {% if insurance %}
      <div class="mt-10 animate-fadeIn">
        <h3 class="text-2xl font-bold text-green-600 mb-6 text-center">
          ‚úÖ Hospitals covered under <span class="text-blue-700">"{{ insurance }}"</span>
        </h3>
        {% if hospitals %}
        <div class="grid md:grid-cols-2 gap-4">
          {% for hospital in hospitals %}
          <div class="p-5 border rounded-xl shadow-sm bg-gradient-to-r from-blue-50 to-purple-50 hover:shadow-md transition transform hover:scale-105">
            <a href="{{ url_for('hospital_info') }}?hospital={{ hospital }}" 
              class="block text-lg font-bold text-blue-800 hover:underline">
              {{ hospital }}
            </a>
          </div>
          {% endfor %}
        </div>
        {% else %}
        <p class="text-red-500 text-center font-medium">‚ùå No hospitals found for this insurance provider.</p>
        {% endif %}
      </div>
      {% endif %}
    </div>
  </section>

  <!-- Footer -->
  <footer class="mt-auto py-8 bg-gradient-to-r from-blue-800 to-purple-800 text-white text-center">
    <p class="text-sm">&copy; 2025 <span class="font-semibold">HealthSentinel</span> | Final Year Project by Bernard Goh</p>
  </footer>

  <!-- Scripts -->
  <script>
    // Ripple effect
    document.addEventListener("DOMContentLoaded", () => {
      document.querySelectorAll(".ripple").forEach(btn => {
        btn.addEventListener("click", function (e) {
          const circle = document.createElement("span");
          const diameter = Math.max(this.clientWidth, this.clientHeight);
          const radius = diameter / 2;
          circle.style.width = circle.style.height = `${diameter}px`;
          circle.style.left = `${e.clientX - this.offsetLeft - radius}px`;
          circle.style.top = `${e.clientY - this.offsetTop - radius}px`;
          circle.classList.add("ripple-effect");
          this.querySelector(".ripple-effect")?.remove();
          this.appendChild(circle);
        });
      });
    });

    // Autocomplete
    function filterProviders(value) {
      const list = document.getElementById("providerList");
      const items = list.querySelectorAll("li");
      if (!value) { list.classList.add("hidden"); return; }
      let match = false;
      items.forEach(item => {
        if (item.textContent.toLowerCase().includes(value.toLowerCase())) {
          item.style.display = "";
          match = true;
        } else {
          item.style.display = "none";
        }
      });
      list.classList.toggle("hidden", !match);
    }

    function selectProvider(provider) {
      document.getElementById("insurance").value = provider;
      document.getElementById("providerList").classList.add("hidden");
    }
  </script>

</body>
</html>
